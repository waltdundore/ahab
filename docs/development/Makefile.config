# ==============================================================================
# Ahab - Configuration
# ==============================================================================
# Shared configuration variables for all Makefiles
#
# This file contains all configurable variables used across the Ahab project.
# Variables can be overridden by setting environment variables before running make.
#
# Usage:
#   make deploy                          # Uses defaults
#   BASE_DIR=~/projects make deploy      # Override base directory
#   GITHUB_USER=myuser make deploy       # Override GitHub username
#
# ==============================================================================

#------------------------------------------------------------------------------
# Repository Configuration
#------------------------------------------------------------------------------
# Base directory where all three repositories are cloned
# Default: ~/git
# Override: BASE_DIR=~/projects make <target>
BASE_DIR ?= $(HOME)/git

# GitHub username for repository URLs
# Default: waltdundore
# Override: GITHUB_USER=myuser make <target>
GITHUB_USER ?= waltdundore

#------------------------------------------------------------------------------
# Ansible Configuration
#------------------------------------------------------------------------------
# Default playbook to run for deployments
# Override: DEFAULT_PLAYBOOK=playbooks/custom.yml make deploy
DEFAULT_PLAYBOOK ?= playbooks/docker.yml

# Dynamic inventory script for Vagrant VMs
# Used by: make provision, make deploy (in Vagrant context)
VAGRANT_INVENTORY ?= inventory/vagrant.py

#------------------------------------------------------------------------------
# Platform Detection
#------------------------------------------------------------------------------
# Automatically detect the operating system
# Used for: Cross-platform compatibility in scripts and commands
UNAME_S := $(shell uname -s)
IS_MACOS := $(filter Darwin,$(UNAME_S))
IS_LINUX := $(filter Linux,$(UNAME_S))

#------------------------------------------------------------------------------
# Terminal Colors
#------------------------------------------------------------------------------
# ANSI color codes for terminal output
# Used for: Colored messages in Makefile targets and scripts
RED := \033[0;31m
GREEN := \033[0;32m
YELLOW := \033[1;33m
BLUE := \033[0;34m
NC := \033[0m

#------------------------------------------------------------------------------
# Git Branch Detection
#------------------------------------------------------------------------------
# Automatically detect current git branch
# Used for: Branch-specific inventory paths and workflow validation
# Falls back to "unknown" if not in a git repository
CURRENT_BRANCH := $(shell git rev-parse --abbrev-ref HEAD 2>/dev/null || echo "unknown")
