# About Ahab

![Ahab Logo](ahab/docs/images/ahab-logo.png)

## What We're Building

Infrastructure automation for schools and non-profits. Simple commands. Working Docker Compose files. Radical transparency.

**Our Mission**: Make infrastructure automation accessible to everyone.

**Our Commitment**: Every build produces a working `docker-compose.yml` file. This file is proof.

---

## How This Code Is Built

**This project is a demonstration of AI-assisted development.**

The vast majority of this code is written by AI (Kiro/Claude) based on requirements and direction from a human manager. The human writes very little actual code - instead providing:
- Requirements and specifications
- Design decisions and priorities
- Testing feedback and bug reports
- Documentation review and corrections

**What this demonstrates**:
- What AI can build from clear requirements
- How human-AI collaboration produces working software
- The speed and consistency AI brings to development
- A new model for software development

**Why we're transparent about this**:
- This is a feature, not a bug - it shows what's possible
- Schools can see how AI tools can accelerate their own development
- Understanding AI's role in modern development
- Demonstrating the future of software development

**This is the value** - showing what can be accomplished when humans provide clear direction and AI handles implementation. The human provides vision, requirements, and quality control. The AI provides implementation speed, consistency, and comprehensive documentation.

---

## What I Actually Do (And Why It's Hard to Explain)

**"So what do you do?"**

I get this question a lot. And I never have a good answer.

**The short version**: I build infrastructure automation for schools using AI.

**The real version**: I'm doing something that doesn't have a job title yet.

### The Role That Doesn't Exist

I'm not a traditional developer - I write very little code myself. I'm not a project manager - I'm deeply technical. I'm not a consultant - I'm building a product. I'm not a teacher - though teaching is baked into everything.

**What I actually do**:
- **Requirements architect**: I figure out what needs to exist and why
- **AI manager**: I direct AI to implement those requirements
- **Quality controller**: I test, verify, and ensure it actually works
- **Documentation writer**: I explain what was built and why it matters
- **Standards enforcer**: I ensure security, safety, and best practices
- **Systems thinker**: I see how pieces connect and where they'll break

**The closest analogy**: I'm like a film director. I don't act, I don't run the camera, I don't edit - but I have a vision for what the final product should be, and I coordinate everyone (in this case, AI) to make it happen.

### Why This Is Hard to Explain

**Traditional roles don't fit**:
- Developers write code ‚Üí I mostly don't
- Managers don't touch technical details ‚Üí I'm deep in the weeds
- Architects don't verify implementation ‚Üí I test everything
- Teachers don't build products ‚Üí I'm shipping software

**What makes it harder**: This is new. AI-assisted development at this scale, with this level of transparency, with this teaching focus - there's no established pattern for it.

### What I'm Actually Building

**On the surface**: Infrastructure automation tools for schools.

**What I'm really building**:
1. **A new development model** - showing what's possible when humans direct AI
2. **A teaching platform** - every line of code explains why, not just what
3. **A transparency experiment** - releasing everything, including the specs that show how it's built
4. **A knowledge transfer system** - documenting so others can learn and continue

**The meta-goal**: Prove that one person with clear vision and AI assistance can build production-grade infrastructure automation that would traditionally require a team.

### Why This Matters

**For me personally**: I can never explain what I do at parties. This project is partly an attempt to create something tangible I can point to and say "I built this, and here's how."

**For the industry**: This is a glimpse of how software development is changing. The role of "human who directs AI to build things" is going to become more common, but right now it doesn't have a name or a career path.

**For schools**: They get working tools built by someone who understands their constraints (limited budget, limited staff, need for transparency).

**For other introverts**: You don't need to be loud or extroverted to make an impact. You need to be clear, thorough, and willing to document what you know. Intelligence without communication dies with you - but documented intelligence lives on.

### The Uncomfortable Truth

**I'm figuring this out as I go.** There's no playbook for "person who manages AI to build infrastructure automation while maintaining safety-critical standards and teaching everything along the way."

**Some days I feel like**:
- A conductor (orchestrating AI to build components)
- A teacher (explaining why things work this way)
- A quality inspector (testing everything rigorously)
- A writer (documenting the journey)
- A security analyst (ensuring nothing breaks in dangerous ways)

**Most days I feel like**: Someone doing something that doesn't have a name yet, hoping it makes sense to someone else eventually.

### What Success Looks Like

**Short term**: Schools can deploy infrastructure without expensive consultants.

**Medium term**: Other people can pick up this project and continue it because everything is documented.

**Long term**: This model of AI-assisted development becomes normal, and we have better language for describing these roles.

**Personal success**: When someone asks "what do you do?" I can say "I built Ahab" and they can see the code, read the docs, understand the process, and say "oh, I get it now."

**This project is partly an attempt to explain myself to myself.** If I can document it clearly enough for others to understand, maybe I'll finally have an answer to "what do you do?"

---

## Acknowledgments

**This project exists because of [Kris Lamoureux](https://github.com/krislamo).**

One conversation. One brilliant mind. One spark that lit this entire journey. Kris's insight and vision made this possible. Thank you, friend.

---

## Why This Matters: The Teaching Mission

**We're not here forever.**

This project isn't just about infrastructure automation. It's about **documenting what we know to be true** and **passing it on**.

Every script, every page, every refactor carries a teaching mindset. Not because we're vendors selling a product, but because **knowledge dies when it's not shared**.

### The Wake-Up Call

Life teaches you: document now or lose it forever. The pain of losing knowledge - watching it walk out the door with consultants, watching it disappear when people leave, watching it fade because nobody wrote it down - that pain is real.

**We refuse to let that happen here.**

### What We Promise

**Baked into everything**:
- **Teaching mindset**: Every piece of code explains WHY, not just WHAT
- **Radical transparency**: Show the failures, not just successes
- **Knowledge transfer**: Document so others can learn and carry forward
- **No black boxes**: If you can't understand it, we failed

**This isn't marketing. This is mission.**

Yes, we'll be "vendors" in some situations. We'll market. We'll sell the value. But underneath every pitch is a deeper truth: **we're teachers first**.

### For the Introverts

You don't have to be loud to make an impact. You don't have to be extroverted to change things. But you do have to **speak up for yourself** - because if you don't, who will?

**Playing to be in the game** doesn't mean being someone you're not. It means:
- Documenting what you know
- Sharing what you've learned
- Teaching what you've discovered
- Building something that outlasts you

**Intelligence without communication is knowledge that dies with you.**

### The Legacy

When we're gone, this project remains. The code, the documentation, the teaching - it all stays. Someone else picks it up, learns from it, builds on it, passes it forward.

**That's the point.**

Not to build the perfect system. Not to make millions. Not to be famous.

**To teach. To document. To pass it on.**

**That's why every line of code has a comment explaining WHY. That's why every decision is documented. That's why failures are recorded alongside successes. That's why this file exists.**

**Because we're not here forever, but what we teach can be.**

---

## Document Dependencies

**Before updating this file**: Check DOCUMENT_LINKS.md

This file is the **foundation** of the project. When you change the philosophy here, you must update:
1. DEVELOPMENT_RULES.md - Core Principles must align
2. README.md - Mission statement must match
3. index.html - Philosophy section must match
4. SPECIFICATIONS.md - Requirements must serve the mission

**Rule**: Philosophy changes flow DOWN to all other documents. Never let code changes drive philosophy changes.

---

## The Problem

Schools and non-profits face impossible choices:

**Cloud Services**: Expensive monthly fees, data on someone else's servers, vendor lock-in.

**IT Consultants**: Expensive hourly rates, knowledge leaves when they leave, black box solutions.

**DIY with Complex Tools**: Steep learning curve, cryptic documentation, easy to break things.

**We're Building Option 4**: Simple, transparent, self-hosted infrastructure automation.

---

## Our Solution

### Now: Simple Commands
```bash
make install         # Create workstation
make deploy-apache   # Deploy Apache in Docker
```

### Future: Menu-Driven Interface
```
What would you like to deploy?

[ ] Web Server (Apache/Nginx)
[ ] Database (MySQL/PostgreSQL)
[ ] File Server (Nextcloud)
[ ] Email Server

Select services ‚Üí Answer questions ‚Üí Done.
```

---

## Architecture: Multi-Repository Ecosystem

Ahab is a family of related projects, each with its own GitHub repository:

### Core Infrastructure

| Repository | Purpose | Status | URL |
|-----------|---------|--------|-----|
| **ahab** | Core automation engine | ‚úÖ Active | git@github.com:waltdundore/ahab.git |
| **ahab-modules** | Service definitions (Apache, MySQL, etc.) | ‚úÖ Active | git@github.com:waltdundore/ahab-modules.git |

### User Interfaces

| Repository | Purpose | Status | URL |
|-----------|---------|--------|-----|
| **ahab-gui** | Web interface (Flask) - executes `make` commands | ‚úÖ Active | git@github.com:waltdundore/ahab-gui.git |
| **alpha-gui** | Next-level interface built on ahab | üîÑ Planned | TBD |

### Documentation & Marketing

| Repository | Purpose | Status | URL |
|-----------|---------|--------|-----|
| **waltdundore.github.io** | Project website (GitHub Pages) | ‚úÖ Active | git@github.com:waltdundore/waltdundore.github.io.git |

**Why Separate Repositories?**
- **ahab**: Core automation can be used standalone
- **ahab-gui**: Optional web interface for those who prefer visual tools
- **alpha-gui**: Advanced features without bloating the core
- **waltdundore.github.io**: Marketing and documentation separate from code
- Each versioned independently
- Each tested in isolation
- Users choose what they need

**How They Connect**:
- **ahab-gui** ‚Üí executes `make` commands in **ahab**
- **alpha-gui** ‚Üí builds on **ahab** (uses make commands)
- **waltdundore.github.io** ‚Üí documents all projects
- **ahab-modules** ‚Üí used by **ahab** (Git submodule)

---

## Docker Compose First Architecture

**The Commitment**: Every build produces a working `docker-compose.yml` file.

**How It Works**:
1. Modules define services in `module.yml` files
2. Script reads module metadata
3. Script generates `docker-compose.yml` automatically
4. You deploy with `docker-compose up -d`

**Why This Matters**:
- Reproducible deployments
- Works on any platform
- Easy to understand and modify
- Proof that it works

---

## Testing Pipeline: Our Quality Gate

We don't release until tests pass. Here's our pipeline:

### 1. Workstation Bootstrap Test (Critical Milestone)
```bash
make clean
make install
make verify-install
```
**Must Pass**: If this fails, nothing else matters. This is what users do first.

### 2. Raspberry Pi Testing
- Deploy to local Raspberry Pi servers
- Validate on ARM architecture
- Run all working tests
- Prove it works on real hardware

### 3. Dev Server Gate (d701.dundore.net)
- Deploy to production-like environment
- Run complete test suite
- **This is our internal quality gate**
- Users don't need this server (it's configurable)
- We don't release until this passes

### 4. Release Creation
Only after all tests pass:
- Tag all four repositories with same version
- Include validated `docker-compose.yml`
- Document what was tested and where
- Publish release notes

**Transparency**: Virtual tests must be perfect because users won't have d701.dundore.net. We test rigorously so you don't have to.

---

## Release Requirements

### Before Any Release

**1. Workstation Bootstrap Test Must Pass**
```bash
make clean && make install && make verify-install
```
If this fails, STOP. Fix it. Nothing else matters.

**2. Docker Compose Generation Must Work**
```bash
make install apache
curl http://localhost  # Must respond
```

**3. All Working Tests Must Pass**
- Module deployment tests
- Service functionality tests
- Integration tests

**4. Raspberry Pi Tests Must Pass**
- Deploy to Raspberry Pi
- Run all working tests
- Verify ARM architecture compatibility

**5. Dev Server Tests Must Pass (d701.dundore.net)**
- Deploy to dev server
- Run complete test suite
- Verify production-like environment

**6. Documentation Must Be Current**
- README.md reflects current state
- CHANGELOG.md updated
- All commands tested and verified

**7. All Four Repositories Tagged**
```bash
# Tag all repos with same version
git tag v1.0.0
git push origin v1.0.0
```

### Release Checklist

- [ ] Workstation bootstrap test passes
- [ ] Docker Compose generation works
- [ ] All working tests pass
- [ ] Raspberry Pi tests pass
- [ ] Dev server tests pass (d701.dundore.net)
- [ ] Documentation updated
- [ ] CHANGELOG.md updated
- [ ] All four repositories tagged
- [ ] Release notes written
- [ ] `docker-compose.yml` included in release

**No Exceptions**: If any test fails, no release.

---

## How to Do a Release

### Step 1: Verify Tests Pass
```bash
# Workstation bootstrap
make clean
make install
make verify-install

# Docker Compose generation (via make install)
cd ahab
make install apache
curl http://localhost  # Verify running

# Run all tests
make test
```

### Step 2: Deploy to Raspberry Pi
```bash
# Deploy to Raspberry Pi inventory
ansible-playbook -i inventory/raspberry-pi/hosts.yml playbooks/webserver.yml

# Run tests on Raspberry Pi
make test  # Or specific test commands as defined in Makefile
```

### Step 3: Deploy to Dev Server
```bash
# Deploy to d701.dundore.net
ansible-playbook -i inventory/dev-server/hosts.yml playbooks/webserver.yml

# Run complete test suite
make test  # Or specific test commands as defined in Makefile
```

### Step 4: Update Documentation
```bash
# Update CHANGELOG.md
vim CHANGELOG.md

# Update README.md if needed
vim README.md

# Commit documentation
git add CHANGELOG.md README.md
git commit -m "docs: Update for v1.0.0 release"
```

### Step 5: Tag All Repositories
```bash
# Tag ahab
cd ahab
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0

# Tag ansible-config
cd ../ansible-config
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0

# Tag ansible-inventory
cd ../ansible-inventory
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0

# Tag ahab-modules
cd ../ahab/modules
git tag -a v1.0.0 -m "Release v1.0.0"
git push origin v1.0.0
```

### Step 6: Create GitHub Release
```bash
# Create release on GitHub
gh release create v1.0.0 \
  --title "Ahab v1.0.0" \
  --notes "See CHANGELOG.md for details" \
  docker-compose.yml
```

### Step 7: Verify Release
```bash
# Clone fresh and test
cd /tmp
git clone git@github.com:waltdundore/ahab.git
cd ahab
git checkout v1.0.0
make install
make verify-install
```

---

## Secrets Management

**Ansible Vault encrypts all secrets.**

### Encrypting Secrets

```bash
# Encrypt a secrets file
ansible-vault encrypt ansible-config/secrets.yml

# Edit encrypted secrets
ansible-vault edit ansible-config/secrets.yml

# View encrypted secrets
ansible-vault view ansible-config/secrets.yml

# Decrypt (for deployment)
ansible-vault decrypt ansible-config/secrets.yml --output=/tmp/secrets.yml
```

### Using Encrypted Secrets in Playbooks

```yaml
# playbook.yml
- hosts: all
  vars_files:
    - secrets.yml  # Ansible Vault will decrypt automatically
  tasks:
    - name: Use secret
      debug:
        msg: "{{ secret_api_key }}"
```

### Vault Password File

```bash
# Store vault password (DO NOT COMMIT THIS FILE)
echo "your-vault-password" > .vault_pass
chmod 600 .vault_pass

# Add to .gitignore
echo ".vault_pass" >> .gitignore

# Use with ansible-playbook
ansible-playbook playbook.yml --vault-password-file .vault_pass
```

### Security Rules

1. **Never commit unencrypted secrets**
2. **Always use Ansible Vault for sensitive data**
3. **Keep vault password secure** (not in Git)
4. **Rotate secrets regularly**
5. **Use different vault passwords for dev/prod**

### What to Encrypt

- Passwords
- API keys
- SSL certificates
- SSH private keys
- Database credentials
- OAuth tokens
- Any sensitive configuration

---

## Kiro Review Process

**Before Every Refactoring**: Kiro (AI assistant) reviews:

1. **Current State**
   - What files exist
   - What's documented
   - What's tested

2. **Proposed Changes**
   - What will change
   - Why it's changing
   - What tests are needed

3. **Impact Analysis**
   - What might break
   - What needs updating
   - What needs testing

4. **Documentation Review**
   - Is README.md current?
   - Is CHANGELOG.md updated?
   - Are commands tested?

5. **Test Coverage**
   - Are all tests passing?
   - Are new tests needed?
   - Is the testing pipeline complete?

**The Rule**: No refactoring without Kiro review. No release without all tests passing.

---

## Learning Path: We Teach You

### For Users

**Step 1: Quick Start**
```bash
make install
make deploy-apache
```
Learn by doing. See it work.

**Step 2: Understand the Architecture**
- Read README.md
- Understand four repositories
- See how they connect

**Step 3: Explore the Code**
- Read playbooks
- Read module definitions
- Understand Docker Compose generation

**Step 4: Modify and Experiment**
- Change configuration
- Deploy different services
- Create your own modules

### For Contributors

**Step 1: Read the Rules**
- DEVELOPMENT_RULES.md
- Core principles
- Security standards

**Step 2: Understand the Testing Pipeline**
- Workstation bootstrap test
- Raspberry Pi testing
- Dev server gate
- Release requirements

**Step 3: Make Changes**
- Follow the rules
- Write tests
- Document everything

**Step 4: Submit Pull Request**
- All tests must pass
- Documentation must be updated
- Kiro reviews before merge

---

## Our Principles

### 1. Docker Compose First
Every build produces a working `docker-compose.yml` file.

### 2. Radical Transparency
We show you everything: what works, what doesn't, what we're fixing.

### 3. Test Before Release
No release until all tests pass. No exceptions.

### 4. We Use What We Document
We use the same commands we document for you. Same repository. Same network. We test every change in our homelab environment. If it breaks for you, we likely found it first in testing.

### 5. Never Assume Success
Every operation is verified. No silent failures.

### 6. Container-First Architecture
Always use containers. Never install directly on hosts.

### 7. Safety-Critical Standards
We follow security standards for safety-critical code. Schools can't afford data loss.

### 8. Kiro Reviews Everything
Before every refactoring, Kiro reviews the plan.

### 9. Documentation as Education
Every command example teaches the right way. We show the tested, maintained interface. Direct tool usage is internal implementation, not user interface.

**Learn More**: [DEVELOPMENT_RULES.md](DEVELOPMENT_RULES.md)

---

## Who This Is For

### K-12 Schools
- Manage infrastructure
- Control your data
- Teach real DevOps
- Free forever

### Non-Profits
- Self-host services
- Reduce costs
- Maintain privacy
- No vendor lock-in

### Students
- Learn by doing
- Real-world tools
- Safe to experiment
- Build portfolio

### Teachers
- Teach infrastructure automation
- Real working examples
- Comprehensive documentation
- Free for education

---

## Lessons Learned (Dec 8, 2025)

### Documentation Consolidation
- **Before**: 51 markdown files scattered everywhere
- **After**: 9 core files + 44 archived (82% reduction)
- **Lesson**: Meta documentation (docs about docs) creates noise - consolidate or delete
- **Best Practice**: Keep root directory clean, archive promptly, delete empty files immediately

### Release Process (v0.1.0)
- **Security First**: Completed comprehensive audit (A- grade) before release
- **No Uncommitted Changes**: Rookie move to release with uncommitted changes
- **Make-First Rule**: NEVER bypass Makefile - we eat our own dog food
- **Empathy Matters**: 80%+ empathy/troubleshooting coverage required in error messages
- **Test Everything**: `make clean && make install && make verify-install` must pass
- **Permission Issues**: Rsync can create root-owned directories - always fix with `chown vagrant:vagrant`
- **Test Status Tracking**: `.test-status` file tracks last passing version - only promote passing tests

### Security Standards Compliance
- **Verified**: All security rules accurately implemented for shell scripts
- **Adapted**: Industry-standard rules translated to shell equivalents
- **Why It Matters**: Schools can't afford data loss - safety-critical standards prevent bugs
- **Tool**: `make test-security-standards` validates compliance

### Security Audit Results
- **Grade**: A- (Excellent)
- **No Hardcoded Secrets**: Ansible Vault for all sensitive data
- **Input Validation**: All scripts validate parameters
- **Docker Security**: No privileged containers, proper permissions
- **One Minor Issue**: Command injection risk (fixed) - low impact
- **Recommendation**: Install shellcheck, add pre-commit hooks

## Current Status

### ‚úÖ What Works (v0.1.0 Released)
- Four-repository architecture
- Workstation VM creation (`make install`)
- Verification commands (`make verify-install`)
- Apache module deployment
- Security audit passed (A- grade)
- Complete documentation

### üîÑ In Progress
- Docker Compose generation integration
- Additional modules (MySQL, Nginx, PostgreSQL)
- Raspberry Pi testing framework
- Automated release process

### ‚ö†Ô∏è Known Issues
- Test scripts need to run Docker in VM (not on host)
- Empathy coverage at 47% (need 80%) - requires human review
- Troubleshooting coverage at 56% (need 90%) - requires actual helpful steps

**Transparency**: We document failures as well as successes.

---

## Roadmap

### Phase 1: Foundation (Now)
- [ ] Workstation bootstrap test passes
- [ ] Docker Compose generation works
- [ ] First module deployed (Apache)
- [ ] Documentation consolidated

### Phase 2: Testing Pipeline (Next)
- [ ] Raspberry Pi testing
- [ ] Dev server deployment
- [ ] Release process automated
- [ ] More modules (MySQL, Nginx)

### Phase 3: User Interface (Future)
- [ ] Menu-driven interface
- [ ] Service selection
- [ ] One-click deployment
- [ ] Status dashboard

### Phase 4: Community (Future)
- [ ] Service marketplace
- [ ] Community modules
- [ ] Automated updates
- [ ] Support system

---

## How to Help

1. **Test it** - Try `make install`, report issues
2. **Contribute** - Add modules, fix bugs
3. **Feedback** - Tell us what works and what doesn't
4. **Security** - Help with security review
5. **Teach with it** - Use in classrooms
6. **Spread the word** - Help schools discover this

---

## Contact

- **GitHub**: https://github.com/waltdundore/ahab
- **Issues**: https://github.com/waltdundore/ahab/issues
- **Discussions**: https://github.com/waltdundore/ahab/discussions

---

## License

Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)

- **Free for schools, non-profits, and educational institutions**
- **For-profit entities**: Contact us to negotiate commercial terms
- See [LICENSE](LICENSE) file for full details

---

## The Bottom Line

**We promise**: Working `docker-compose.yml` files for every service.

**We test**: Workstation ‚Üí Raspberry Pi ‚Üí Dev Server ‚Üí Release.

**We document**: Everything. Successes and failures.

**We teach**: How to use it, how to modify it, how to release it.

**We review**: Kiro reviews before every refactoring.

**Don't trust us. Verify us. Learn from us. Build with us.**

---

*Last updated: December 7, 2025*
